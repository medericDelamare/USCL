{% extends 'base.html.twig' %}

{% block body %}
<header class="business-header {{ class }}" style="background: url({{ asset('pictures/seniorB.JPG') }}) center center no-repeat scroll;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="tagline"></h1>
            </div>
        </div>
    </div>
</header>
<ul class="nav nav-pills mb-3 scrollmenu" id="pills-tab" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-classement" role="tab" aria-controls="pills-home" aria-selected="true">Classement</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-resultats" role="tab" aria-controls="pills-resultats" aria-selected="false">RÃ©sultats</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-agenda" role="tab" aria-controls="pills-agenda" aria-selected="false">Agenda</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-calendrier" role="tab" aria-controls="pills-calendrier" aria-selected="false">Calendrier</a>
    </li>
</ul>
<div class="container-fluid">
    <div class="row">
        <div class="tab-content col-12 p-0" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-classement" role="tabpanel" aria-labelledby="pills-home-tab">
                {% include 'template/template-statistiques-classement.html.twig' %}
            </div>
            <div class="tab-pane fade" id="pills-resultats" role="tabpanel" aria-labelledby="pills-profile-tab">
                {% include 'template/template-statistiques-resultats.html.twig' %}
            </div>
            <div class="tab-pane fade" id="pills-agenda" role="tabpanel" aria-labelledby="pills-profile-tab">
                {% include 'template/template-statistiques-agenda.html.twig' %}
            </div>
            <div class="tab-pane fade" id="pills-calendrier" role="tabpanel" aria-labelledby="pills-profile-tab">
                {% include 'template/template-statistiques-calendrier.html.twig' %}
            </div>
        </div>
    </div>
</div>

{% endblock %}


{% block javascripts %}
    <script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script>
        var equipeId = $( "#selectEquipe" ).val();
        var getUrl = window.location;
        var baseUrl = getUrl.protocol + "//" + getUrl.host + "/";
        var route = baseUrl + 'get-calendrier-par-equipe/';
        var categorie = '{{ competitionId }}';
        $(document).ready( function () {
            $('#loaderCalendrier').show();
            refreshClassement(route, equipeId, categorie);
            $('#selectEquipe').change(function () {
                $('#loaderCalendrier').addClass('d-flex').removeClass('d-none');
                equipeId = $( "#selectEquipe" ).val();
                refreshClassement(route, equipeId,categorie);
            })
            function refreshClassement(route, equipeCourante, categorie){
                $.ajax({
                    url: route + equipeCourante + '/' + categorie,
                    type: "GET",
                    success: function(data){
                        $('#loaderCalendrier').removeClass('d-flex');
                        $('#loaderCalendrier').addClass('d-none');
                        $("#resultAjaxCalendrier").html(data);
                    }
                });
            }
        });
    </script>
{% endblock %}
